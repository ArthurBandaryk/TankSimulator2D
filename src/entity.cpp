#include "entity.hpp"
#include <stdexcept>

///////////////////////////////////////////////////////////////////////////////

namespace arci {

///////////////////////////////////////////////////////////////////////////////

Entity::Entity()
  : m_texture{std::make_unique<sf::Texture>()},
    m_sprite{std::make_unique<sf::Sprite>()} {
}

///////////////////////////////////////////////////////////////////////////////

void Entity::setTextureAndSprite(const sf::IntRect& rect, bool repeated) {
  if (!m_texture->loadFromFile(ms_texturePath, rect)) {
    throw std::runtime_error{
        "Error on loading texture for the path: " + ms_texturePath};
  }

  m_texture->setSmooth(true);
  if (repeated) {
    m_texture->setRepeated(true);
  }
  m_sprite->setTexture(*m_texture.get());
}

///////////////////////////////////////////////////////////////////////////////

void Entity::setScale(const sf::Vector2f& scale) {
  m_sprite->setScale(scale);
}

///////////////////////////////////////////////////////////////////////////////

sf::Sprite& Entity::getSprite() {
  if (!m_sprite) {
    throw std::logic_error{"Invalid state for sprite"};
  }
  return *m_sprite.get();
}

///////////////////////////////////////////////////////////////////////////////

} // namespace arci

///////////////////////////////////////////////////////////////////////////////
